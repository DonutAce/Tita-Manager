<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hangman — Guess the Word</title>
<style>
  :root{
    --bg1:#0f1724; --bg2:#071129; --card:#071a2a;
    --accent:#ffd055; --muted:#9fb4c8; --good:#38d39f; --bad:#ff6b6b;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e8f1f7; font-family:system-ui,Segoe UI,Roboto,Arial;
    padding:20px;
  }
  .wrap{width:1100px; max-width:100%; background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01)); border-radius:14px; padding:28px; display:grid; grid-template-columns:1fr 420px; gap:22px; box-shadow:0 12px 40px rgba(2,6,23,0.7)}
  @media (max-width:980px){.wrap{grid-template-columns:1fr}}
  header{display:flex; align-items:center; justify-content:space-between; gap:12px}
  h1{font-size:34px; margin:0; color:var(--accent); text-shadow:0 3px 10px rgba(0,0,0,0.6)}
  .controls{display:flex; gap:10px; align-items:center}
  select, button{
    font-size:16px; padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
    background:rgba(255,255,255,0.06); color:inherit;
  }
  button.primary{background:var(--accent); color:#06202a; font-weight:700}
  main{padding:10px}
  .word-area{display:flex; align-items:center; justify-content:center; gap:14px; margin:26px 0; flex-wrap:wrap}
  .letter{
    width:56px; height:76px; border-radius:8px; background:rgba(255,255,255,0.03);
    display:flex; align-items:center; justify-content:center; font-size:36px; font-weight:700; letter-spacing:4px;
    border:2px solid rgba(255,255,255,0.03);
  }
  .letter.revealed{background:rgba(255,255,255,0.06); color:var(--accent); transform:translateY(0); transition:0.18s}
  .info{display:flex; align-items:center; gap:14px; justify-content:center; margin-top:8px; color:var(--muted)}
  .small{font-size:14px; color:var(--muted)}
  .keyboard{display:grid; grid-template-columns:repeat(13,1fr); gap:8px; margin-top:18px}
  .key{padding:12px 8px; border-radius:8px; background:rgba(255,255,255,0.03); text-align:center; cursor:pointer; user-select:none; font-weight:700}
  .key.used{opacity:0.35; cursor:not-allowed}
  .key.wrong{background:var(--bad); color:#1b0c0c}
  .key.correct{background:var(--good); color:#032419}
  .side{
    padding:18px; border-radius:12px; background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01)); display:flex; flex-direction:column; gap:12px;
  }
  .panel{background:rgba(255,255,255,0.02); padding:12px; border-radius:10px}
  .stat{font-size:22px}
  .wrong-list{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
  .bad-chip{padding:8px 10px; background:rgba(255,255,255,0.03); border-radius:8px; color:var(--bad); font-weight:700}
  .hangman{
    width:100%; height:220px; display:flex; align-items:center; justify-content:center;
  }
  svg{max-width:220px}
  footer.small{font-size:13px; color:var(--muted); text-align:center; margin-top:12px}
  .modal{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.5);
  }
  .modal-card{
    background:linear-gradient(180deg,#072032,#02121b); padding:28px; border-radius:12px; color:#fff; text-align:center; width:420px;
  }
  .hintBtn{background:#7bd389; color:#07220a}
</style>
</head>
<body>
<div class="wrap" role="application" aria-label="Hangman game">
  <div>
    <header>
      <h1>Hangman — Guess the Word</h1>
      <div class="controls">
        <label class="small" for="category">Category:</label>
        <select id="category" aria-label="Category choose">
          <option value="animals">Animals</option>
          <option value="science">Science</option>
          <option value="geography">Geography</option>
          <option value="people">Famous People</option>
        </select>
        <button id="newBtn" class="primary">New Word</button>
      </div>
    </header>

    <main>
      <div class="word-area" id="wordArea" aria-live="polite"></div>
      <div class="info">
        <div class="small">Lives: <strong id="lives">6</strong></div>
        <div class="small">Score: <strong id="score">0</strong></div>
        <div class="small">Hint used: <strong id="hintsUsed">0</strong></div>
      </div>

      <div class="hangman" aria-hidden="true">
        <!-- SVG hangman stages will be updated by JS -->
        <svg id="hangmanSVG" viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <g stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none">
            <!-- scaffold -->
            <line x1="20" y1="200" x2="180" y2="200" id="base"/>
            <line x1="50" y1="200" x2="50" y2="20" id="pole"/>
            <line x1="50" y1="20" x2="130" y2="20" id="beam"/>
            <line x1="130" y1="20" x2="130" y2="46" id="rope"/>
            <!-- head -->
            <circle cx="130" cy="68" r="18" id="head" style="display:none"/>
            <!-- body -->
            <line x1="130" y1="86" x2="130" y2="132" id="body" style="display:none"/>
            <line x1="130" y1="96" x2="110" y2="116" id="leftArm" style="display:none"/>
            <line x1="130" y1="96" x2="150" y2="116" id="rightArm" style="display:none"/>
            <line x1="130" y1="132" x2="110" y2="168" id="leftLeg" style="display:none"/>
            <line x1="130" y1="132" x2="150" y2="168" id="rightLeg" style="display:none"/>
          </g>
        </svg>
      </div>

      <div class="keyboard" id="keyboard" role="group" aria-label="On-screen keyboard"></div>

      <div style="display:flex; gap:12px; justify-content:center; margin-top:14px;">
        <button id="hintBtn" class="hintBtn">Reveal a Letter (Hint)</button>
        <button id="revealBtn">Reveal Word</button>
      </div>
    </main>
  </div>

  <aside class="side" aria-hidden="false">
    <div class="panel">
      <div class="stat">Category clue:</div>
      <div id="clue" style="font-size:20px; margin-top:8px; color:var(--accent)"></div>
    </div>

    <div class="panel">
      <div class="stat">Wrong letters</div>
      <div id="wrongLetters" class="wrong-list"></div>
    </div>

    <div class="panel">
      <div class="stat">How to play</div>
      <div class="small" style="margin-top:8px">Click letters or type on your keyboard. Guess the word before you run out of lives. Use Hint to reveal one letter.</div>
    </div>

    <div class="panel">
      <div class="stat">Best</div>
      <div style="font-size:20px; margin-top:8px" id="best">0</div>
    </div>

    <footer class="small">Built with HTML • CSS • JavaScript</footer>
  </aside>
</div>

<!-- modal templates -->
<div id="modal" style="display:none" role="dialog" aria-modal="true"></div>

<script>
(() => {
  // word lists with clues
  const WORDS = {
    animals: [
      { word: "ELEPHANT", clue: "Largest land mammal" },
      { word: "KANGAROO", clue: "Marsupial from Australia" },
      { word: "DOLPHIN", clue: "Smart marine mammal" },
      { word: "GIRAFFE", clue: "Tallest land animal" },
      { word: "HUMMINGBIRD", clue: "Tiny bird that hovers" },
      { word: "CROCODILE", clue: "Large reptile found in rivers" }
    ],
    science: [
      { word: "GRAVITY", clue: "Force that pulls objects down" },
      { word: "PHOTOSYNTHESIS", clue: "How plants make food" },
      { word: "ATOM", clue: "Smallest unit of an element" },
      { word: "DNA", clue: "Genetic material" },
      { word: "PLANET", clue: "Orbits a star" }
    ],
    geography: [
      { word: "EVEREST", clue: "Tallest mountain on Earth (common name)" },
      { word: "NILE", clue: "Longest river in Africa" },
      { word: "SAHARA", clue: "Largest hot desert" },
      { word: "ARCHIPELAGO", clue: "Chain of islands" },
      { word: "PENINSULA", clue: "Land surrounded by water on 3 sides" }
    ],
    people: [
      { word: "EINSTEIN", clue: "Developed theory of relativity" },
      { word: "DA VINCI", clue: "Painter of the Mona Lisa (two words allowed)" },
      { word: "GALILEO", clue: "Used a telescope to study the skies" },
      { word: "MARIE CURIE", clue: "Pioneer in radioactivity (two words)" }
    ]
  };

  // game state
  let categorySelect = document.getElementById('category');
  let newBtn = document.getElementById('newBtn');
  let wordArea = document.getElementById('wordArea');
  let keyboardDiv = document.getElementById('keyboard');
  let livesEl = document.getElementById('lives');
  let scoreEl = document.getElementById('score');
  let hintBtn = document.getElementById('hintBtn');
  let revealBtn = document.getElementById('revealBtn');
  let wrongLettersDiv = document.getElementById('wrongLetters');
  let clueEl = document.getElementById('clue');
  let bestEl = document.getElementById('best');
  let hintsUsedEl = document.getElementById('hintsUsed');

  let currentWord = "";
  let displayed = [];
  let wrongLetters = [];
  let lives = 6;
  let score = 0;
  let best = parseInt(localStorage.getItem('hangmanBest') || "0", 10);
  let hintsUsed = 0;

  bestEl.textContent = best;

  // build keyboard A-Z (space allowed)
  const KEYS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ'.-".split(''); // include apostrophe and dash for names
  function buildKeyboard(){
    keyboardDiv.innerHTML = "";
    KEYS.forEach(k => {
      const btn = document.createElement('div');
      btn.className = 'key';
      btn.textContent = k;
      btn.dataset.letter = k;
      btn.addEventListener('click', () => handleGuess(k));
      keyboardDiv.appendChild(btn);
    });
    // also add a space key
    const spaceKey = document.createElement('div');
    spaceKey.className = 'key';
    spaceKey.style.gridColumn = 'span 13'; // full-width small spacer (appears at bottom)
    spaceKey.textContent = 'Tip: Use your keyboard too';
    spaceKey.style.background = 'transparent';
    spaceKey.style.cursor = 'default';
    spaceKey.style.fontSize = '12px';
    keyboardDiv.appendChild(spaceKey);
  }

  function chooseWord(){
    const cat = categorySelect.value;
    const list = WORDS[cat];
    const pick = list[Math.floor(Math.random() * list.length)];
    return { raw: pick.word.toUpperCase(), clue: pick.clue };
  }

  function startNew(){
    const pick = chooseWord();
    currentWord = pick.raw;
    clueEl.textContent = pick.clue;
    wrongLetters = [];
    lives = 6;
    displayed = [];
    hintsUsed = 0;
    hintsUsedEl.textContent = hintsUsed;
    // prepare displayed with underscores (preserve spaces and punctuation)
    for (let ch of currentWord) {
      if (ch === ' ' || ch === '-' || ch === '.' || ch === "'") displayed.push(ch);
      else displayed.push('_');
    }
    updateUI();
    resetKeyboard();
    updateHangman();
  }

  function updateUI(){
    // render word area
    wordArea.innerHTML = "";
    displayed.forEach((ch, idx) => {
      const el = document.createElement('div');
      el.className = 'letter' + (ch !== '_' ? ' revealed' : '');
      el.textContent = (ch === '_' ? '' : ch);
      wordArea.appendChild(el);
    });
    livesEl.textContent = lives;
    scoreEl.textContent = score;
    wrongLettersDiv.innerHTML = '';
    wrongLetters.forEach(l => {
      const chip = document.createElement('div');
      chip.className = 'bad-chip';
      chip.textContent = l;
      wrongLettersDiv.appendChild(chip);
    });
    hintsUsedEl.textContent = hintsUsed;
  }

  function resetKeyboard(){
    document.querySelectorAll('.key').forEach(k => {
      k.classList.remove('used','wrong','correct');
      k.style.pointerEvents = 'auto';
    });
  }

  function disableKey(letter){
    const node = Array.from(document.querySelectorAll('.key')).find(n => n.dataset.letter === letter);
    if(node){
      node.classList.add('used');
      node.style.pointerEvents = 'none';
    }
  }

  function handleGuess(letter){
    if (!letter) return;
    letter = letter.toUpperCase();
    // check if already used
    if (wrongLetters.includes(letter) || displayed.includes(letter)) {
      disableKey(letter);
      return;
    }

    // reveal if present
    let found = false;
    for (let i=0;i<currentWord.length;i++){
      if (currentWord[i] === letter){
        displayed[i] = letter;
        found = true;
      }
    }

    // update keyboard style
    const keyNode = Array.from(document.querySelectorAll('.key')).find(n => n.dataset.letter === letter);
    if (found){
      if (keyNode) keyNode.classList.add('correct');
      score += 5;
    } else {
      if (keyNode) keyNode.classList.add('wrong');
      wrongLetters.push(letter);
      lives -= 1;
      score = Math.max(0, score - 2);
    }
    disableKey(letter);
    updateUI();
    updateHangman();
    checkWinLose();
  }

  function updateHangman(){
    // show parts based on wrong count (6 lives -> 0 wrongs initially)
    const wrongCount = 6 - lives;
    const parts = ['head','body','leftArm','rightArm','leftLeg','rightLeg'];
    parts.forEach((id, idx) => {
      const el = document.getElementById(id);
      if (el) el.style.display = (idx < wrongCount) ? 'block' : 'none';
    });
  }

  function revealHint(){
    // reveal one hidden letter at random
    const hiddenIdx = displayed.map((c,i)=> c === '_' ? i : -1).filter(i=>i>=0);
    if (hiddenIdx.length === 0) return;
    const idx = hiddenIdx[Math.floor(Math.random() * hiddenIdx.length)];
    const letter = currentWord[idx];
    hintsUsed++;
    hintsUsedEl.textContent = hintsUsed;
    handleGuess(letter);
  }

  function revealWord(){
    for (let i=0;i<currentWord.length;i++){
      if (displayed[i] === '_') displayed[i] = currentWord[i];
    }
    updateUI();
    checkWinLose(true);
  }

  function checkWinLose(forceReveal=false){
    if (!displayed.includes('_')){
      // win
      score += 20;
      showModal(true, `You guessed it! The word was: <strong>${currentWord}</strong>`, () => {
        if (score > best){ best = score; localStorage.setItem('hangmanBest', best); bestEl.textContent = best; }
        startNew();
      });
    } else if (lives <= 0){
      // lost
      showModal(false, `You ran out of lives. The word was: <strong>${currentWord}</strong>`, () => {
        if (score > best){ best = score; localStorage.setItem('hangmanBest', best); bestEl.textContent = best; }
        startNew();
      });
    } else if (forceReveal){
      showModal(false, `The word was: <strong>${currentWord}</strong>`, () => startNew());
    }
  }

  function showModal(win, html, onClose){
    const modal = document.getElementById('modal');
    modal.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.className = 'modal';
    wrapper.innerHTML = `
      <div class="modal-card" role="alertdialog" aria-live="polite">
        <div style="font-size:28px; font-weight:800; color:${win? 'var(--good)':'var(--bad)'}">${win ? 'You Win!' : 'Game Over'}</div>
        <div style="margin-top:12px; font-size:18px">${html}</div>
        <div style="margin-top:18px">
          <button id="closeModal" class="primary">${win ? 'Next Word' : 'Try Again'}</button>
        </div>
      </div>`;
    modal.appendChild(wrapper);
    modal.style.display = 'block';
    document.getElementById('closeModal').addEventListener('click', () => {
      modal.style.display = 'none';
      onClose && onClose();
    });
  }

  // keyboard input support
  window.addEventListener('keydown', (e) => {
    if (e.key.length === 1){
      const key = e.key.toUpperCase();
      if (KEYS.includes(key)){
        handleGuess(key);
      } else if (key === ' '){
        // ignore
      }
    } else if (e.key === 'Enter'){
      // new word on enter if modal visible? ignore
    }
  });

  // attach UI events
  newBtn.addEventListener('click', startNew);
  categorySelect.addEventListener('change', startNew);
  hintBtn.addEventListener('click', () => {
    if (hintsUsed >= 3) {
      alert('You used 3 hints already for this word.');
      return;
    }
    revealHint();
  });
  revealBtn.addEventListener('click', () => revealWord());

  // initialize
  buildKeyboard();
  startNew();

})();
</script>
</body>
</html>
